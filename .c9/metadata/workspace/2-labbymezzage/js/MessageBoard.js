{"changed":true,"filter":false,"title":"MessageBoard.js","tooltip":"/2-labbymezzage/js/MessageBoard.js","value":"\"use strict\";\nfunction MessageBoard(boardID){\n    var that = this;\n    // getting reference to the board\n    var div = document.querySelector(\"#\" + boardID);\n    \n    this.messages = [];\n    \n    this.init = function(){\n        // Init function that initiates the board, creating a button and a textfield\n        // Creating div to hold the messages\n        var messagesDiv = document.createElement(\"div\");\n        messagesDiv.className = \"messages\";\n        div.appendChild(messagesDiv);\n        \n        // Create element to hold the messagecount\n        var countDiv = document.createElement(\"div\");\n        countDiv.className = \"numberofmess\";\n        div.appendChild(countDiv);\n        \n        // Create a text-field\n        var textarea = document.createElement(\"textarea\");\n        textarea.className = \"textarea\";\n        div.appendChild(textarea);\n        \n        // Create a send-button\n        var inputButton = document.createElement(\"input\");\n        inputButton.type = \"button\";\n        inputButton.value = \"skicka\";\n        inputButton.className = \"button\";\n        div.appendChild(inputButton);\n        \n        // Add eventlisteners\n        inputButton.addEventListener(\"click\", that.createMessage, false);\n        textarea.addEventListener(\"keypress\", function(e) {\n            if (!e) {e = window.event;}\n            if (e.keyCode == 13 && !e.shiftKey){\n                e.preventDefault();\n                that.createMessage();\n            }\n        });\n    };\n    \n    this.createMessage = function(){\n        // Reference to the textarea\n        var input = document.querySelector(\"#\"+boardID+\" textarea\");\n        var mess = new Message(input.value, new Date());\n        \n        // Adds message to array and renders it\n        that.messages.push(mess); \n        that.renderMessage(that.messages.length - 1);\n        // Resets the text-field on click/enter\n        input.value= \"\";\n        that.messageCount();\n        \n        // that in this func cus when i click \"this\" points to input.button even tho\n        // the eventhandler uses that. it works with eventlistener for enter key tho??\n    };\n    \n    this.renderMessage = function(messageID){\n        var messagesDiv = document.querySelector(\"#\" +boardID+\" .messages\");\n        \n        // Creating div for the message object\n        var messageDiv = document.createElement(\"div\");\n        messageDiv.className = \"message\";\n        messagesDiv.appendChild(messageDiv);\n        \n        // Creating a div to hold the buttons for timestamp/delete\n        var buttonDiv = document.createElement(\"div\");\n        buttonDiv.className = \"buttons\";\n        messageDiv.appendChild(buttonDiv);\n        \n        // Creating the delete-button\n        var aClose = document.createElement(\"a\");\n        var imgClose = document.createElement(\"img\");\n        imgClose.className = \"delete\";\n        aClose.setAttribute(\"href\", \"#\");\n        imgClose.setAttribute(\"src\", \"img/Remove-icon.png\");\n        aClose.appendChild(imgClose);\n        buttonDiv.appendChild(aClose);\n        \n        // Creating the timestamp-button\n        var aTime = document.createElement(\"a\");\n        var imgTime = document.createElement(\"img\");\n        imgTime.className = \"time\";\n        aTime.setAttribute(\"href\", \"#\");\n        imgTime.setAttribute(\"src\", \"img/clock.png\");\n        aTime.appendChild(imgTime);\n        buttonDiv.appendChild(aTime);\n        \n        // Creating elements and rendering the message\n        var text = document.createElement(\"p\");\n        text.className = \"msgtext\";\n        messageDiv.appendChild(text);\n        \n        // Creating elements and rendering the timestamp\n        var time = document.createElement(\"p\");\n        time.className = \"timestamp\";\n        messageDiv.appendChild(time);\n        \n        // Rendering the message and time\n        text.innerHTML = this.messages[messageID].getHTMLtext();\n        time.innerHTML = this.messages[messageID].getDateText();\n        \n        // Eventhandlers for the buttons\n        imgClose.alt=\"close\";\n        imgClose.addEventListener(\"click\", function(e) {\n            that.deleteMessage(messageID);\n            that.messageCount();\n\n        });\n        imgTime.alt=\"Time\";\n        imgTime.addEventListener(\"click\", function(e) {\n            //that.showTimeStamp(messageID);\n            that.showTimeStamp(messageID);\n            \n        });\n        \n        this.renderMessages = function(){\n            // Clears the messages and renders them all again\n            document.querySelector(\"#\" + boardID+ \" .messages\").innerHTML=\"\";\n            \n            for(var i = 0; i < that.messages.length; i++){\n                that.renderMessage(i);\n            }\n        };\n        \n        this.deleteMessage = function(messageID){\n            // Deletets one message then calls renderMessages to render all\n            if(window.confirm(\"Vill du verkligen ta bort meddelandet?\")){\n                this.messages.splice(messageID, 1);\n                this.renderMessages();\n            }\n        };\n        \n        this.showTimeStamp = function(messageID){\n            alert(this.messages[messageID].toString());\n        };\n        \n        this.messageCount = function(messageID){\n            var count = this.messages.length;\n            var div = document.querySelector(\"#\" +boardID +\" .numberofmess\");\n            \n            // Removes messagecounter if all messages are deleted\n            if(this.messages.length !== 0){\n                div.innerHTML = \"Antal meddelanden: \" + count;    \n            }\n            else{\n                div.innerHTML = \"\";\n            }\n        };\n    };\n}\n\n\n\n","undoManager":{"mark":94,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":148,"column":31},"end":{"row":148,"column":32},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":32},"end":{"row":148,"column":33},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":33},"end":{"row":148,"column":34},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":34},"end":{"row":148,"column":35},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":35},"end":{"row":148,"column":36},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":36},"end":{"row":148,"column":37},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":37},"end":{"row":148,"column":38},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":38},"end":{"row":148,"column":39},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":39},"end":{"row":148,"column":40},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":40},"end":{"row":148,"column":41},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":41},"end":{"row":148,"column":42},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":42},"end":{"row":148,"column":43},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":43},"end":{"row":148,"column":44},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":44},"end":{"row":148,"column":45},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":45},"end":{"row":148,"column":46},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":46},"end":{"row":148,"column":47},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":47},"end":{"row":148,"column":48},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":48},"end":{"row":148,"column":49},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":49},"end":{"row":148,"column":50},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":50},"end":{"row":148,"column":51},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":51},"end":{"row":148,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":52},"end":{"row":148,"column":53},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":53},"end":{"row":148,"column":54},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":54},"end":{"row":148,"column":55},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":55},"end":{"row":148,"column":56},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":56},"end":{"row":148,"column":57},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":57},"end":{"row":148,"column":58},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":58},"end":{"row":148,"column":59},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":59},"end":{"row":148,"column":60},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":60},"end":{"row":148,"column":61},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":61},"end":{"row":148,"column":62},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":62},"end":{"row":148,"column":63},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":63},"end":{"row":148,"column":64},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":64},"end":{"row":148,"column":65},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":0},"end":{"row":113,"column":34},"action":"remove","lines":["            //that.messageCount();"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":32},"end":{"row":113,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":0},"end":{"row":158,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":6},"end":{"row":157,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":10},"end":{"row":155,"column":7},"action":"remove","lines":["","       "]}]}],[{"group":"doc","deltas":[{"start":{"row":60,"column":1},"end":{"row":60,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":60,"column":0},"end":{"row":60,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":0},"end":{"row":60,"column":6},"action":"remove","lines":["","      "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":45},"end":{"row":59,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":39},"end":{"row":58,"column":45},"action":"remove","lines":["why???"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":39},"end":{"row":58,"column":40},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":39},"end":{"row":58,"column":40},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":39},"end":{"row":58,"column":40},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":40},"end":{"row":58,"column":41},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":41},"end":{"row":58,"column":42},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":42},"end":{"row":58,"column":43},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":43},"end":{"row":58,"column":44},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":44},"end":{"row":58,"column":45},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":45},"end":{"row":58,"column":46},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":46},"end":{"row":58,"column":47},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":47},"end":{"row":58,"column":48},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":48},"end":{"row":58,"column":49},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":48},"end":{"row":58,"column":49},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":48},"end":{"row":58,"column":49},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":49},"end":{"row":58,"column":50},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":50},"end":{"row":58,"column":51},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":51},"end":{"row":58,"column":52},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":52},"end":{"row":58,"column":53},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":53},"end":{"row":58,"column":54},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":54},"end":{"row":58,"column":55},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":55},"end":{"row":58,"column":56},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":56},"end":{"row":58,"column":57},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":57},"end":{"row":58,"column":58},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":58},"end":{"row":58,"column":59},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":59},"end":{"row":58,"column":60},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":60},"end":{"row":58,"column":61},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":61},"end":{"row":58,"column":62},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":62},"end":{"row":58,"column":63},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":63},"end":{"row":58,"column":64},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":64},"end":{"row":58,"column":65},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":65},"end":{"row":58,"column":66},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":66},"end":{"row":58,"column":67},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":67},"end":{"row":58,"column":68},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":68},"end":{"row":58,"column":69},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":69},"end":{"row":58,"column":70},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":70},"end":{"row":58,"column":71},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":71},"end":{"row":58,"column":72},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":72},"end":{"row":58,"column":73},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":73},"end":{"row":58,"column":74},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":74},"end":{"row":58,"column":75},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":75},"end":{"row":58,"column":76},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":76},"end":{"row":58,"column":77},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":77},"end":{"row":58,"column":78},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":78},"end":{"row":58,"column":79},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":79},"end":{"row":58,"column":80},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":80},"end":{"row":58,"column":81},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":81},"end":{"row":58,"column":82},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":82},"end":{"row":58,"column":83},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":83},"end":{"row":58,"column":84},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":84},"end":{"row":58,"column":85},"action":"insert","lines":["?"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":85},"end":{"row":58,"column":86},"action":"insert","lines":["?"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":1},"end":{"row":40,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":0},"end":{"row":40,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":13},"end":{"row":40,"column":10},"action":"remove","lines":["","          "]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":8},"end":{"row":47,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":4},"end":{"row":46,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"remove","lines":["    "]}]}]]},"ace":{"folds":[],"scrolltop":540,"scrollleft":0,"selection":{"start":{"row":46,"column":0},"end":{"row":46,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":35,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1416864494013}